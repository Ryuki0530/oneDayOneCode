# 今日のC課題：Timer1のハードPWMでサーボ角度を制御せよ（Servoライブラリ禁止）

## 目的
Arduino Uno（ATmega328P / 16MHz）を想定し、Timer1（16bit）を使ってサーボ用PWM（50Hz）を生成し、
シリアル入力で角度を指定してサーボを動かす。

## 制約
- `Servo.h`（Servoライブラリ）禁止
- `delay()` で20ms周期を作るのも禁止（タイマで50Hzを作る）
- PWM出力は **OC1Aピン**（Arduino Unoなら **D9**）を使う
- コードはVS Code（PlatformIO または Arduino CLI）でビルド・書き込みする前提

## PWM仕様（サーボ）
- 周期：20ms（= 50Hz）
- パルス幅：
  - 0° → 1000µs
  - 180° → 2000µs
  - 角度は線形補間

## シリアル入出力仕様
- ボーレート：`115200`
- 1行コマンド：
  - `A <angle>`（例：`A 90`）
    - `<angle>` は `0`〜`180` の整数
- 受理したら `OK <angle>` を返す（例：`OK 90`）
- 範囲外・不正なら `ERR` を返す

## 実装ヒント（タイマ設定の目安）
Fast PWM + TOPをICR1にする構成が扱いやすい。

### プリスケーラ8の例
- タイマ刻み：0.5µs（16MHz / 8）
- 20ms = 20000µs → 40000カウント  
  → `ICR1 = 40000`
- 1000µs → 2000カウント  
- 2000µs → 4000カウント  

### 角度→パルス幅→OCR1A
- `us = 1000 + angle * 1000 / 180`（整数計算の丸めに注意）
- `ticks = us * 2`（0.5µs刻みなので×2）
- `OCR1A = ticks`

## クリア条件
- `A 0` → サーボが最小側へ動く
- `A 180` → 最大側へ動く
- `A 90` → だいたい中央へ動く
- シリアルに `OK` / `ERR` が仕様通り出る

## 追加チャレンジ（余裕があれば）
- `S <min_us> <max_us>` で個体差キャリブレーションできるようにする
- 角度変更時に1度ずつ追従させる（簡易スムージング）
