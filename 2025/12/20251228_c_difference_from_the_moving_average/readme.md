# 今日の課題（C）: 「最小の“作業メモリ”で動く移動平均との差分」【15〜25分】

## 目的
ストリーム入力（1行ずつ来るログみたいなやつ）を、**配列を全部持たずに**処理する練習。  
Cで「リングバッファ」「移動平均」「逐次処理」をやる。

---

## 問題
標準入力から整数が1行ずつ与えられる。最初に **窓幅 W** が与えられ、その後に整数列が続く（EOFまで）。

各 i 番目の値 `x[i]` について、

- まだ直近 W 個が揃っていない間（i < W-1）は何も出力しない
- 直近 W 個が揃ったら（i >= W-1）  
  `avg = (x[i-W+1] + ... + x[i]) / W` を計算し、  
  `diff = x[i] - avg` を **小数で**出力する（小数点以下3桁）

---

## 入力形式
- 1行目: 整数 W（1 <= W <= 1000）
- 2行目以降: 整数（-10^9 〜 10^9 程度を想定、EOFまで）

---

## 出力形式
i >= W-1 の各行について、`diff` を1行ずつ出力する。  
`printf("%.3f\n", diff);` みたいに小数点以下3桁で。

---

## 例
### 入力
5
10
20
30
40
50
60

### 出力
20.000
20.000

説明:
- 50 の時点: avg=(10+20+30+40+50)/5=30 → diff=50-30=20
- 60 の時点: avg=(20+30+40+50+60)/5=40 → diff=60-40=20

---

## 制約・実装ルール（重要）
- 入力を全部配列に溜めない（= ストリーム処理）
- 使っていい保持データは **直近W個**だけ
- 計算量は O(N)、各要素の処理は O(1) で

---

## ヒント（超短）
- `long long sum` を持って、窓に入る値は足す、出る値は引く
- `int buf[W]` は可変長配列でもOK（C99以上）、不安なら `malloc`
- `idx = i % W` でリングバッファ

---

## 追加チャレンジ（余裕があれば）
- W=1 のときも正しく動く（avg=x[i] → diff=0）
- 入力が空（Wしかない）でも落ちない

---
