# OneDayOneCode: PyQt「二窓」MP4プレイヤー（問題文）

## 概要
Python（PyQt）で **メインウィンドウ** と **再生ウィンドウ** の 2 つを使う MP4 プレイヤーを作成せよ。  
メインウィンドウで MP4 ファイルを選択すると、別ウィンドウが開いて動画を再生する。既に再生ウィンドウが開いている場合は、同じウィンドウで動画を差し替えて再生すること。

---

## 開発環境
- OS: Windows 11
- IDE: VSCode
- 言語: Python 3.10 以上（受検者の環境に合わせて可）
- GUI: PyQt6（`PyQt6`, `PyQt6-Qt6`）
- マルチメディア: QtMultimedia（Qt6 標準 / Windows は基本的に Media Foundation 経由）

> **注意**: H.264/AAC など一般的な MP4 で動作確認すること。コーデック未対応の場合はエラー表示を行う。

---

## 仕様

### 1) メインウィンドウ
- メニューバーに **「ファイル > 開く…」** を配置する。
- `*.mp4` をファイルダイアログで選択可能にする。
- 動画が選択されたら **再生ウィンドウ** を開き、選択した動画を**自動再生**する。
- 既に再生ウィンドウが存在する場合は **同じウィンドウに読み直し**（新規に増やさない）。
- メインウィンドウを閉じたらアプリ全体を終了する。

### 2) 再生ウィンドウ
- 動画表示領域に **`QVideoWidget`** を用いる。
- 音声出力に **`QAudioOutput`** を用いる。
- **キーボード操作**
  - `Space` … 再生／一時停止のトグル
  - `Esc` … 再生ウィンドウを閉じる（メインは残す）
- ウィンドウを閉じた際は再生停止とリソース解放を行う。

### 3) エラーハンドリング
- 読み込み失敗や未対応コーデック等は **メッセージボックス**（`QMessageBox.critical` 等）でユーザ通知。
- 標準出力に簡易ログ（読み込みパス、成功/失敗など）を出力。

---

## 入出力仕様（学習ポイント）
- **入力**: ファイルダイアログで選択された `*.mp4` パス（任意でコマンドライン引数 `--file path/to/video.mp4` を受けても良い）。
- **出力**: 画面への動画表示・音声再生。標準出力へイベントログ（例: `Loaded: C:\video\sample.mp4`）。

---

## ディレクトリ構成（例）
単一ファイルでも可。見通しのため 2 モジュール構成を推奨。

```
project/
├─ main.py          # メインウィンドウ、メニュー、ファイル選択
└─ player_window.py # 再生ウィンドウ（QMediaPlayer + QVideoWidget）
```

---

## 実装要点（APIガイド）
- `QMediaPlayer` … 再生エンジン
  - `setSource(QUrl.fromLocalFile(path))`
  - `setVideoOutput(video_widget)`
  - `setAudioOutput(QAudioOutput())`
  - `play() / pause()`
  - シグナル: `errorChanged`, `playbackStateChanged`, `positionChanged`, `durationChanged`
- `QVideoWidget` … 映像出力先
- `QAudioOutput` … 音量/デバイス指定（例: `audio.setVolume(0.5)`）
- `QFileDialog.getOpenFileName(self, "動画を開く", "", "Video Files (*.mp4)")`
- `QMessageBox.critical(self, "再生エラー", "…")`

---

## 受け入れ条件（合格判定）
すべて満たすこと：
1. アプリ起動 → **ファイル > 開く…** → MP4 選択 → **別ウィンドウ**で**自動再生**される。
2. 2 本目以降の選択時、**同じ再生ウィンドウ**に差し替わって再生される（ウィンドウが増えない）。
3. 再生ウィンドウで `Space` キーが再生/一時停止のトグルとして機能する。
4. 再生ウィンドウで `Esc` キーで再生ウィンドウのみ閉じられる（メインは残る）。
5. コーデック未対応等で読み込みに失敗した場合、**エラーダイアログ**が表示される。
6. メインウィンドウを閉じるとアプリ全体が終了する。

---

## 発展課題（任意）
- **シークスライダー**と**経過/総時間ラベル**を追加。
- **ドラッグ＆ドロップ**でメインウィンドウに MP4 を投下して再生。
- **最近開いたファイル（MRU）** を `QSettings` で保存/メニュー表示。
- CLI オプション `--file`, `--loop`（ループ再生）を追加。

---

## 実行方法（例）
```bash
# 仮想環境は任意
pip install PyQt6

# 実行
python main.py
```

---

## 提出物
- 実装コード一式（`main.py`, `player_window.py` など）
- 動作確認のスクリーンショット（再生ウィンドウが映っていること）
- 既知の制限・注意点（対応コーデックなど）を `README.md` に記載
